<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lahire Writeup Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <h1 class="text-2xl font-bold text-gray-900">Lahire Writeup Tool</h1>
            </div>
        </div>
    </header>
    
    <main class="max-w-5xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="space-y-8">
            <!tabs>
            <div class="border-b border-gray-200">
                <nav class="flex space-x-8">
                    <button id="basicTab" class="py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm">Basic Info</button>
                    <button id="writeupTab" class="py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm">Writeup</button>
                    <button id="toolsTab" class="py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm">Tools</button>
                    <button id="reviewTab" class="py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm">Review</button>
                </nav>
            </div>

            <!content>
            <div id="basicContent">
                <div class ="bg-white p-6 rounded-lg shadow border">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">Details</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium test-gray-700 mb-2">Event name</label>
                            <input type="text" id="ctfEvent" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: MetaCTF">
                        </div>
                        <div>
                            <label class="block text-sm font-medium test-gray-700 mb-2">Challenge</label>
                            <input type="text" id="challenge" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: Find the Flag">
                        </div>
                        <div>
                            <label class="block text-sm font-medium test-gray-700 mb-2">Points</label>
                            <input type="text" id="points" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: 100">
                        </div>
                    </div>
                </div>
            </div>

            <div id="writeupContent"style="display: none">
                <div class="bg-white p-6 rounded-lg shadow border">
                    <h2 class="text-xl font-bold text-gray-900 mb-4">How</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Section Title</label>
                            <input type="text" id="sectionTitle" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: Recon">
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Content</label>
                            <textarea id="sectionContent" rows="6" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ex: Used nmap to scan ports of x.x.x.x/24 and got x result.."></textarea>
                        </div>
                        <button id="addSectionBtn" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">+ section</button>
                    </div>
                </div>
                <!current sections>
                <div id="sectionsList" class="bg-white p-6 rounded-lg shadow border" style="display: none;" >
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Current Sections</h3>
                    <div id="sectionsContainer"></div>
                </div>
            </div>     

            <div id="toolsContent"style="display: none">
                <h2>Tools & Resources</h2>
                <p>TBA</p>
            </div>     

            <div id="reviewContent"style="display: none">
                <h2>Export & Review</h2>
                <p>TBA</p>
            </div>

        </div>
        <h2 class="text-xl text-gray-800">placeholder footer</h2>
    </main>

    <!tab stuff>
    <script>
        // hide content
        function showTab(tabName){
            document.getElementById('basicContent').style="display: none";
            document.getElementById('writeupContent').style="display: none";
            document.getElementById('toolsContent').style="display: none";
            document.getElementById('reviewContent').style="display: none";

            // reset tabs
            const tabs = ['basicTab', 'writeupTab', 'toolsTab', 'reviewTab'];
            tabs.forEach(tab => {
                document.getElementById(tab).className = 'py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm';
            })
        
            // active tab & show content
            document.getElementById(tabName + 'Content').style.display = 'block';
            document.getElementById(tabName + 'Tab').className = 'py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm'
        }

        // data collection
        let writeupData = {
            basicInfo: {},
            sections: [],
            toosl: [],
            references: []
        };

        function collectBasicInfo(){
            writeupData.basicInfo = {
                event: document.getElementById('ctfEvent').value,
                challenge: document.getElementById('challenge').value,
                points: document.getElementById('points').value,
            };
            console.log('Solid joy:', writeupData.basicInfo);
        }

        // listeners
        document.addEventListener('DOMContentLoaded', () => {
            
            // tabs
            document.getElementById('basicTab').addEventListener('click', () => showTab('basic'));
            document.getElementById('writeupTab').addEventListener('click', () => showTab('writeup'));
            document.getElementById('toolsTab').addEventListener('click', () => showTab('tools'));
            document.getElementById('reviewTab').addEventListener('click', () => showTab('review'));
            
            // data collection listener
            document.getElementById('ctfEvent').addEventListener('input', collectBasicInfo);
            document.getElementById('challenge').addEventListener('input', collectBasicInfo);
            document.getElementById('points').addEventListener('input', collectBasicInfo);

        });

        // sections
        function addSection(){
            const title = document.getElementById('sectionTitle').value.trim();
            const content = document.getElementById('sectionContent').value.trim();

            // writeup sections and add date/tiem
            if (title && content){
                writeupData.sections.push({
                    title: title,
                    content: content,
                    id: Date.now()
                });

                // clean up
                document.getElementById('sectionTitle').value='';
                document.getElementById('sectionContent').value='';
                updateSectionsList();
                console.log('section joy:', writeupData.sections);
            } else{
                // add more logging? -jlahire
                alert('enter title + content')
            }
        }

        function updateSectionsList(){
            // shows section if exists, hides if not
            const container = document.getElementById('sectionsContainer');
            const sectionsList = document.getElementById('sectionsList');
            // show
            if (writeupData.sections.length > 0){
                sectionsList.style.display = 'block';
                container.innerHTML = writeupData.sections.map((section, index) => `
                    <div class="border border-gray-200 rounded-lg p-4 mb-3">
                        <div class="flex justify-between items-start">
                            <div>
                                <h4 class="font-semibold text-gray-800">${section.title}</h4>
                                <p class="text-sm text-gray-600 mt-1">${section.content.substring(0, 100)}${section.content.length > 100 ? '...' : ''}</p>
                            </div>
                            <button onclick="removeSection(${index})" class="text-red-500 hover:text-red-700 text-sm">Delete</button>
                        </div>
                    </div>
                `).join('');
            } else {
            // hide
            sectionsList.style.display = 'none';
            }
        }

        // delete section
        function removeSection(index){
            writeupData.sections.splice(index, 1);
            updateSectionsList();
        }

        // load
        document.getElementById('addSectionBtn').addEventListener('click', addSection);

    </script>
</body>
</html>